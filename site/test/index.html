<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laws</title>
    <base href="http://localhost:8000" />
    <meta name="Generator" content="Pagegen" />
    <link rel="shortcut icon" href="http://localhost:8000/assets/theme/images/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="http://localhost:8000/assets/theme/css/site.css" type="text/css" />
    <script src="http://localhost:8000/assets/theme/javascript/site.js"></script>
  </head>
  <body>
    <nav class="note-wide">
      <a href="/" class="home-link"><h1>Filaments</h1></a>
      <a href="thoughts">Thoughts</a>
      <a href="inbox">Inbox</a>
      <a href="references">References</a>
    </nav>
    <article class="note-wide">
      
	<h1>Laws</h1>
	<ul>
<li>One thought per page</li>
</ul>

    </article>
  <script>var sleep = time => new Promise(resolve => setTimeout(resolve, time))
var poll = (promiseFn, time) => promiseFn().then(
  sleep(time).then(() => poll(promiseFn, time))
)

var page_loaded_at = new Date();
var url = '/pagegen_site_hash';
var poll_intervall = 1000 // ms

poll(() => new Promise(() => {
  var http = new XMLHttpRequest();
  http.open('HEAD', url);
  http.onreadystatechange = function() {
    if (this.readyState == this.DONE) {
      var last_modified = new Date(this.getResponseHeader("Last-Modified"));
      if (last_modified > page_loaded_at) {
        window.location.reload();
      }
    }
  };
  http.send();
}), poll_intervall)
</script></body>
</html>
